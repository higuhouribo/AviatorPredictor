<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Aviator Predictor | Signals</title>
  <link rel="stylesheet" href="style.css"/>
</head>
<body>
  <div class="signal-bg">
    <main class="signal-main-card">
      <div class="profile-section">
        <div class="profile-circle">M</div>
      </div>
      <div class="signal-title">Aviator</div>
      <div class="signal-subtitle">TURBO PREDICTOR PMT & LIL JEE-FX</div>
      <div class="signal-value" id="signal-box">-</div>
      <div class="confidence-bar" id="confidence-bar" style="display:none;"></div>
      <div class="powered-by">POWERED BY AVIATOR EXPERT</div>
      <div class="username-bar">PMT_LILJEEFX</div>
      <div class="action-row">
        <button class="action-btn" id="predict-btn">PREDICT</button>
        <button class="action-btn" id="platform-btn">PLATFORM</button>
        <button class="action-btn" id="delete-btn">DELETE</button>
      </div>
      <button class="license-btn" id="license-btn">ðŸ”‘ NEW LICENSE KEY</button>
      <div class="aviator-list-section">
        <div class="aviator-list-title">AVIATOR LISTS:</div>
        <div class="aviator-list-card">
          <div class="aviator-badge">TURBO PREDICTOR PMT & LIL JEE-FX</div>
        </div>
        <div class="signal-stats-row">
          <div class="stat-block">Accuracy<br><span id="accuracy-val">99%</span></div>
          <div class="stat-block">Winning Rate<br><span id="winrate-val">67%</span></div>
        </div>
      </div>
      <div class="risk-toggle-row">
        <label for="risk-select" class="risk-label">Risk Mode:</label>
        <select id="risk-select" class="risk-select">
          <option value="balanced">Balanced</option>
          <option value="safe">Safe</option>
          <option value="aggressive">Aggressive</option>
        </select>
      </div>
      <button class="profile-btn" id="profile-btn">PROFILE ACCOUNT</button>
      <div class="server-status">Server Connected - PMT & LIL JEE-FX</div>
      <button class="big-btn" style="margin-top:20px;" onclick="window.location.href='owner.html'">OWNER INFO âž”</button>
    </main>
    <footer>
      <div class="footer">Coding by PMT</div>
    </footer>
    <!-- Modal for License Key (hidden by default) -->
    <div id="license-modal" class="modal-bg" style="display:none;">
      <div class="modal-card">
        <h2>New License Key</h2>
        <p>Your license key request will be handled soon.<br>
        For support, contact: <b>pmtservices123@gmail.com</b></p>
        <button id="close-modal-btn" class="modal-close-btn">Close</button>
      </div>
    </div>
  </div>
  <script src="quotes.js"></script>
  <script>
    // Improved signal logic with streak adaptation, confidence score, and risk selection.
    let signalHistory = [];
    let streakType = 'random';
    let streakCount = 0;

    // Helper to analyze last N results for adaptive logic
    function recentAvg(n=10) {
      if (signalHistory.length === 0) return 0;
      let slice = signalHistory.slice(-n);
      let avg = slice.reduce((a, b) => a + b, 0) / slice.length;
      return avg;
    }

    function getRiskLevel() {
      return document.getElementById('risk-select').value;
    }

    function improvedSignal() {
      let risk = getRiskLevel();
      let avg = recentAvg(8);
      let last = signalHistory.length > 0 ? signalHistory[signalHistory.length - 1] : 2.2;
      let signal;
      let confidence = 60 + Math.floor(Math.random() * 20);

      // Adaptive, statistical, streak-based logic
      if (risk === 'safe') {
        // Favors low/medium signals, avoids rare spikes
        if (avg < 2) {
          signal = 2.1 + Math.random() * 3.5; // after cold, moderate spike
          confidence += 10;
        } else if (avg > 5) {
          signal = 1.11 + Math.random() * 1.2; // after hot, safe fallback
          confidence += 5;
        } else {
          signal = 1.2 + Math.random() * 4.1; // balanced
        }
      } else if (risk === 'aggressive') {
        // Favors higher signals, more volatility
        if (avg < 2) {
          signal = 4.5 + Math.random() * 8; // more likely a spike
          confidence -= 10;
        } else if (avg > 7) {
          signal = 1.1 + Math.random() * 2.2;
          confidence -= 5;
        } else {
          signal = 2.8 + Math.random() * 10;
        }
      } else {
        // Balanced mode
        if (avg < 2) {
          signal = 2.5 + Math.random() * 5;
          confidence += 5;
        } else if (avg > 7) {
          signal = 1.1 + Math.random() * 2.6;
        } else {
          signal = 1.5 + Math.random() * 7;
        }
      }

      // Clamp and round
      if (signal > 50) signal = 50 + Math.random()*5;
      if (signal < 1.01) signal = 1.01;
      signal = Math.round(signal * 100) / 100;

      // Prevent duplicate last
      if (signalHistory.length > 0 && Math.abs(signalHistory[signalHistory.length-1] - signal) < 0.01) {
        signal += (Math.random() > 0.5 ? 1 : -1) * 0.03;
      }
      confidence = Math.max(55, Math.min(confidence, 98));

      // Update history
      signalHistory.push(signal);
      if (signalHistory.length > 30) signalHistory.shift();

      // Show confidence
      document.getElementById('confidence-bar').style.display = 'block';
      document.getElementById('confidence-bar').innerHTML = 
        `<span class="conf-label">Confidence: </span><span class="conf-value">${confidence}%</span>`;

      return signal.toFixed(2) + 'x';
    }

    function updateSignal() {
      let sig = improvedSignal();
      document.getElementById('signal-box').textContent = sig;
    }

    document.getElementById('predict-btn').onclick = updateSignal;
    document.getElementById('delete-btn').onclick = function(){
      document.getElementById('signal-box').textContent = "-";
      document.getElementById('confidence-bar').style.display = 'none';
    };
    document.getElementById('platform-btn').onclick = function(){
      window.location.href='index.html';
    };
    document.getElementById('profile-btn').onclick = function(){
      window.location.href='owner.html';
    };
    document.getElementById('license-btn').onclick = function(){
      document.getElementById('license-modal').style.display = 'flex';
    };
    document.getElementById('close-modal-btn').onclick = function(){
      document.getElementById('license-modal').style.display = 'none';
    };
    document.getElementById('risk-select').onchange = updateSignal;

    // On load, show first signal
    updateSignal();
  </script>
</body>
</html>
